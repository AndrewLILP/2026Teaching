<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyMoney Tracker - Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body>
    <!-- TEACHING NOTE: JavaScript in dashboard.js needs these specific IDs to update content -->
    
    <!-- Top Navigation Bar -->
    <nav class="navbar">
        <h1>ğŸ’° MyMoney Tracker</h1>
        <!-- onclick calls logout() function in app.js -->
        <button onclick="logout()">Logout</button>
    </nav>

    <div class="container">
        <!-- Summary Cards Section -->
        <!-- TEACHING NOTE: JavaScript updates these .amount elements with calculated totals -->
        <div class="summary-cards">
            <div class="card balance-card">
                <h3>Current Balance</h3>
                <!-- dashboard.js sets textContent of this element -->
                <p class="amount" id="balance">$0.00</p>
                <small>This month</small>
            </div>
            
            <div class="card income-card">
                <h3>Total Income</h3>
                <!-- calculateMonthlyTotals() updates this -->
                <p class="amount" id="total-income">$0.00</p>
                <small>This month</small>
            </div>
            
            <div class="card expense-card">
                <h3>Total Expenses</h3>
                <!-- calculateMonthlyTotals() updates this -->
                <p class="amount" id="total-expenses">$0.00</p>
                <small>This month</small>
            </div>
        </div>

        <!-- Quick Add Buttons -->
        <!-- TEACHING NOTE: These buttons trigger modal display functions -->
        <div class="add-section">
            <!-- Calls showAddIncome() in dashboard.js -->
            <button class="btn-income" onclick="showAddIncome()">
                â• Add Income
            </button>
            <!-- Calls showAddExpense() in dashboard.js -->
            <button class="btn-expense" onclick="showAddExpense()">
                â– Add Expense
            </button>
        </div>

        <!-- Chart Section -->
        <!-- TEACHING NOTE: Chart.js needs a <canvas> element to draw the chart -->
        <div class="chart-section">
            <h2>Spending by Category</h2>
            <!-- loadChart() function creates Chart.js visualization here -->
            <canvas id="categoryChart"></canvas>
        </div>
    </div>

    <!-- INCOME MODAL -->
    <!-- TEACHING NOTE: Modals start hidden (CSS: display:none) and JavaScript changes to display:flex -->
    <div id="income-modal" class="modal">
        <div class="modal-content">
            <h2>Add Income</h2>
            
            <!-- TEACHING NOTE: Each input needs an ID so JavaScript can get its value -->
            <label for="income-amount">Amount ($)</label>
            <input type="number" id="income-amount" placeholder="150.00" step="0.01" min="0" required>
            
            <label for="income-description">Description</label>
            <input type="text" id="income-description" placeholder="e.g., Woolworths pay" required>
            
            <label for="income-date">Date</label>
            <!-- dashboard.js sets this to today's date automatically -->
            <input type="date" id="income-date" required>
            
            <div class="modal-buttons">
                <!-- Calls addIncome() which saves to Firebase -->
                <button class="btn-income" onclick="addIncome()">Add Income</button>
                <!-- Calls closeModal() to hide this modal -->
                <button class="btn-cancel" onclick="closeModal('income-modal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- EXPENSE MODAL -->
    <!-- TEACHING NOTE: This is more complex - it has conditional fields -->
    <div id="expense-modal" class="modal">
        <div class="modal-content">
            <h2>Add Expense</h2>
            
            <label for="expense-amount">Amount ($)</label>
            <input type="number" id="expense-amount" placeholder="45.00" step="0.01" min="0" required>
            
            <label for="expense-description">Description</label>
            <input type="text" id="expense-description" placeholder="e.g., Work shoes" required>
            
            <label for="expense-category">Category</label>
            <!-- TEACHING NOTE: These options match the categories array in dashboard.js -->
            <select id="expense-category" required>
                <option value="">Choose a category</option>
                <option value="Food & Drinks">ğŸ” Food & Drinks</option>
                <option value="Transport">ğŸšŒ Transport</option>
                <option value="Entertainment">ğŸ® Entertainment</option>
                <option value="Clothes & Shoes">ğŸ‘• Clothes & Shoes</option>
                <option value="Work Expenses">ğŸ’¼ Work Expenses</option>
                <option value="Savings">ğŸ’° Savings</option>
                <option value="Other">ğŸ“¦ Other</option>
            </select>
            
            <label for="expense-date">Date</label>
            <input type="date" id="expense-date" required>
            
            <!-- Tax Deductible Section -->
            <!-- TEACHING NOTE: JavaScript listens for changes to this checkbox -->
            <div class="checkbox-container">
                <input type="checkbox" id="tax-deductible">
                <label for="tax-deductible">This expense is tax deductible</label>
            </div>
            
            <!-- TEACHING NOTE: This section is hidden by default (CSS) -->
            <!-- JavaScript shows it when tax-deductible checkbox is checked -->
            <div id="receipt-section" style="display: none;">
                <label for="receipt-location">Where is the receipt?</label>
                <input type="text" id="receipt-location" placeholder="e.g., shoebox under bed">
            </div>
            
            <div class="modal-buttons">
                <!-- Calls addExpense() which validates and saves to Firebase -->
                <button class="btn-expense" onclick="addExpense()">Add Expense</button>
                <button class="btn-cancel" onclick="closeModal('expense-modal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <!-- TEACHING NOTE: .active class (CSS) highlights current page -->
    <nav class="bottom-nav">
        <a href="dashboard.html" class="active">ğŸ“Š Dashboard</a>
        <a href="transactions.html">ğŸ“ Transactions</a>
        <a href="tax.html">ğŸ’¼ Tax</a>
    </nav>

    <!-- Firebase Scripts - MUST load in this order -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    
    <!-- Your Firebase Config -->
    <script src="js/firebase-config.js"></script>
    
    <!-- Dashboard Logic - requires all the IDs above to exist -->
    <script src="js/dashboard.js"></script>
</body>
</html>